#!/bin/bash
# Run plot_results.py for a list of slurm IDs if their logfiles exist
#Slurm IDs for pandemic experiments with 25 g.t. reward functions

#Pandemic GT reward functions:
# SLURM_IDS=(12562133 12562134 12562135 12562136 12562137 12562138 12562139 12562140 12562142 12562143 12562144 12562145 12562146 12562147 12562148 12562159 12562180 12562201 12562218 12562219 12562222 12562223 12562224 12562225 12562227)
#Pandemic GT reward functions, with sign flipped:
SLURM_IDS=(12769268 12769269 12737874 12769270 12769275 12769279 12769282 12737880 12737881 12737882 12737884 12737885 12737886 12737887 12737888 12737889 12737890 12737891 12737892 12737893 12737894 12769283 12769284 12769287 12769288 12737899 12737900 12737901 12737902 12737904 12737905 12737906 12737907 12737908 12737909 12737910 12737911 12737912 12737913 12737914 12737915 12737918 12737919 12737920 12737921 12737922 12737923 12737924 12737925 12737928)


for ID in "${SLURM_IDS[@]}"; do
    LOGFILE="/next/u/stephhk/llm_reward_design/run_logs/slurmjob_${ID}.err"
    OUTDIR="/next/u/stephhk/llm_reward_design/pandemic_rl_gt_rew_fns"
    OUTFILE="${OUTDIR}/pandemic_${ID}.png"

    if [[ -f "$LOGFILE" ]]; then
        mkdir -p "$OUTDIR"
        echo "[INFO] Processing $LOGFILE â†’ $OUTFILE"
        python plot_results.py --logfile "$LOGFILE" --save "$OUTFILE"
    else
        echo "[WARN] Skipping $LOGFILE (does not exist)"
    fi
done